<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NP AI - Advanced AI Assistant Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Inter', sans-serif; }
        .dark { background: #1a1a1a; color: #ffffff; }
        .dark .bg-white { background: #2d2d2d !important; }
        .dark .bg-gray-50 { background: #1f1f1f !important; }
        .dark .bg-gray-100 { background: #2a2a2a !important; }
        .dark .bg-gray-200 { background: #3a3a3a !important; }
        .dark .text-gray-900 { color: #ffffff !important; }
        .dark .text-gray-700 { color: #d1d5db !important; }
        .dark .text-gray-600 { color: #9ca3af !important; }
        .dark .border-gray-200 { border-color: #374151 !important; }
        .dark .border-gray-300 { border-color: #4b5563 !important; }
        .sidebar-item { transition: all 0.2s ease; }
        .sidebar-item:hover { background: rgba(59, 130, 246, 0.1); }
        .active-tab { background: rgba(59, 130, 246, 0.2); border-left: 3px solid #3b82f6; }
        .message-bubble { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .code-editor { font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .glass-effect { backdrop-filter: blur(10px); background: rgba(255, 255, 255, 0.1); }
        .dark .glass-effect { background: rgba(0, 0, 0, 0.3); }
        .typing-indicator { display: inline-block; width: 8px; height: 8px; border-radius: 50%; background: #3b82f6; animation: typing 1.4s infinite; }
        .typing-indicator:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator:nth-child(3) { animation-delay: 0.4s; }
        @keyframes typing { 0%, 60%, 100% { transform: translateY(0); } 30% { transform: translateY(-10px); } }
        .tool-card { transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .tool-card:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
        .dark .tool-card:hover { box-shadow: 0 8px 25px rgba(255,255,255,0.1); }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 transition-colors duration-300">
    <div class="flex h-screen overflow-hidden">
        <div class="w-64 bg-white border-r border-gray-200 flex flex-col">
            <div class="p-4 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <h1 class="text-xl font-bold text-blue-600">NP AI</h1>
                    <button id="themeToggle" class="p-2 rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-moon text-gray-600"></i>
                    </button>
                </div>
                <p class="text-sm text-gray-600 mt-1">Advanced AI Assistant</p>
            </div>

            <nav class="flex-1 p-4">
                <div class="space-y-2">
                    <button onclick="switchTab('chat')" class="sidebar-item w-full text-left p-3 rounded-lg flex items-center space-x-3 active-tab" id="chat-tab">
                        <i class="fas fa-comments text-blue-500"></i>
                        <span>AI Chat</span>
                    </button>
                    <button onclick="switchTab('image')" class="sidebar-item w-full text-left p-3 rounded-lg flex items-center space-x-3" id="image-tab">
                        <i class="fas fa-image text-purple-500"></i>
                        <span>Image Generator</span>
                    </button>
                    <button onclick="switchTab('code')" class="sidebar-item w-full text-left p-3 rounded-lg flex items-center space-x-3" id="code-tab">
                        <i class="fas fa-code text-green-500"></i>
                        <span>Code Assistant</span>
                    </button>
                    <button onclick="switchTab('file')" class="sidebar-item w-full text-left p-3 rounded-lg flex items-center space-x-3" id="file-tab">
                        <i class="fas fa-file-alt text-orange-500"></i>
                        <span>File Processor</span>
                    </button>
                    <button onclick="switchTab('tools')" class="sidebar-item w-full text-left p-3 rounded-lg flex items-center space-x-3" id="tools-tab">
                        <i class="fas fa-tools text-red-500"></i>
                        <span>AI Tools</span>
                    </button>
                </div>

                <div class="mt-8">
                    <h3 class="text-sm font-medium text-gray-500 mb-3 px-3">Recent Chats</h3>
                    <div class="space-y-1" id="recentChats">
                        <div class="sidebar-item p-2 rounded-lg cursor-pointer">
                            <div class="text-sm font-medium">Web Development Help</div>
                            <div class="text-xs text-gray-500">2 minutes ago</div>
                        </div>
                        <div class="sidebar-item p-2 rounded-lg cursor-pointer">
                            <div class="text-sm font-medium">Python Data Analysis</div>
                            <div class="text-xs text-gray-500">1 hour ago</div>
                        </div>
                        <div class="sidebar-item p-2 rounded-lg cursor-pointer">
                            <div class="text-sm font-medium">Creative Writing</div>
                            <div class="text-xs text-gray-500">Yesterday</div>
                        </div>
                    </div>
                </div>
            </nav>

            <div class="p-4 border-t border-gray-200">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                            <i class="fas fa-user text-white text-sm"></i>
                        </div>
                        <div>
                            <div class="text-sm font-medium">User</div>
                            <div class="text-xs text-gray-500">Pro Plan</div>
                        </div>
                    </div>
                    <button onclick="openApiModal()" class="p-2 rounded-lg hover:bg-gray-100 transition-colors">
                        <i class="fas fa-key text-gray-600"></i>
                    </button>
                </div>
            </div>
        </div>

        <div class="flex-1 flex flex-col">
            <div id="chat-content" class="flex-1 flex flex-col">
                <div class="bg-white border-b border-gray-200 p-4">
                    <div class="flex items-center justify-between">
                        <div>
                            <h2 class="text-lg font-semibold">AI Chat Assistant</h2>
                            <p class="text-sm text-gray-600">Powered by advanced language models</p>
                        </div>
                        <div class="flex space-x-2">
                            <button class="p-2 rounded-lg hover:bg-gray-100" onclick="clearChat()">
                                <i class="fas fa-trash text-gray-600"></i>
                            </button>
                            <button class="p-2 rounded-lg hover:bg-gray-100" onclick="exportChat()">
                                <i class="fas fa-download text-gray-600"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="flex-1 overflow-y-auto p-4 space-y-4" id="chatMessages">
                    <div class="message-bubble">
                        <div class="flex items-start space-x-3">
                            <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                                <i class="fas fa-robot text-white text-sm"></i>
                            </div>
                            <div class="flex-1 bg-gray-100 rounded-lg p-3">
                                <p>Hello! I'm NP AI, your advanced AI assistant. I can help you with:</p>
                                <ul class="mt-2 space-y-1 text-sm">
                                    <li>• Answering questions and providing information</li>
                                    <li>• Generating and editing images</li>
                                    <li>• Writing and debugging code</li>
                                    <li>• Processing and analyzing files</li>
                                    <li>• Creative writing and content generation</li>
                                </ul>
                                <p class="mt-2">What would you like to work on today?</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white border-t border-gray-200 p-4">
                    <div class="flex space-x-3">
                        <button class="p-2 rounded-lg hover:bg-gray-100" onclick="attachFile()">
                            <i class="fas fa-paperclip text-gray-600"></i>
                        </button>
                        <div class="flex-1 relative">
                            <input type="text" id="chatInput" placeholder="Type your message..." 
                                   class="w-full p-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                   onkeypress="handleEnter(event)">
                            <button onclick="sendMessage()" class="absolute right-2 top-1/2 transform -translate-y-1/2 p-2 text-blue-500 hover:text-blue-600">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                        <button class="p-2 rounded-lg hover:bg-gray-100" onclick="startVoiceInput()">
                            <i class="fas fa-microphone text-gray-600"></i>
                        </button>
                    </div>
                </div>
            </div>

            <div id="image-content" class="flex-1 flex-col hidden">
                <div class="bg-white border-b border-gray-200 p-4">
                    <h2 class="text-lg font-semibold">AI Image Generator</h2>
                    <p class="text-sm text-gray-600">Create stunning images from text descriptions</p>
                </div>
                <div class="flex-1 p-6">
                    <div class="max-w-4xl mx-auto">
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Image Description</label>
                                    <textarea id="imagePrompt" rows="3" class="w-full p-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Describe the image you want to generate..."></textarea>
                                </div>
                                <div class="grid grid-cols-3 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Style</label>
                                        <select id="imageStyle" class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                            <option value="realistic">Realistic</option>
                                            <option value="artistic">Artistic</option>
                                            <option value="cartoon">Cartoon</option>
                                            <option value="abstract">Abstract</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Size</label>
                                        <select id="imageSize" class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                            <option value="512x512">512x512</option>
                                            <option value="768x768">768x768</option>
                                            <option value="1024x1024">1024x1024</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Quality</label>
                                        <select id="imageQuality" class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                            <option value="standard">Standard</option>
                                            <option value="high">High</option>
                                            <option value="ultra">Ultra</option>
                                        </select>
                                    </div>
                                </div>
                                <button onclick="generateImage()" class="w-full bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition-colors">
                                    <i class="fas fa-magic mr-2"></i>Generate Image
                                </button>
                            </div>
                        </div>
                        <div id="imageResults" class="mt-6 grid grid-cols-2 gap-4">
                            </div>
                    </div>
                </div>
            </div>

            <div id="code-content" class="flex-1 flex-col hidden">
                <div class="bg-white border-b border-gray-200 p-4">
                    <h2 class="text-lg font-semibold">Code Assistant</h2>
                    <p class="text-sm text-gray-600">Write, debug, and optimize your code</p>
                </div>
                <div class="flex-1 flex">
                    <div class="flex-1 flex flex-col">
                        <div class="bg-gray-100 p-3 border-b border-gray-200">
                            <div class="flex items-center justify-between">
                                <div class="flex space-x-2">
                                    <select id="codeLanguage" class="p-1 border border-gray-300 rounded text-sm">
                                        <option value="javascript">JavaScript</option>
                                        <option value="python">Python</option>
                                        <option value="html">HTML</option>
                                        <option value="css">CSS</option>
                                        <option value="java">Java</option>
                                        <option value="cpp">C++</option>
                                    </select>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="runCode()" class="px-3 py-1 bg-green-500 text-white rounded text-sm hover:bg-green-600">
                                        <i class="fas fa-play mr-1"></i>Run
                                    </button>
                                    <button onclick="optimizeCode()" class="px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600">
                                        <i class="fas fa-magic mr-1"></i>Optimize
                                    </button>
                                    <button onclick="explainCode()" class="px-3 py-1 bg-purple-500 text-white rounded text-sm hover:bg-purple-600">
                                        <i class="fas fa-question-circle mr-1"></i>Explain
                                    </button>
                                </div>
                            </div>
                        </div>
                        <textarea id="codeEditor" class="flex-1 p-4 code-editor resize-none focus:outline-none" placeholder="Write your code here...">// Welcome to NP AI Code Assistant
function greetUser(name) {
    return `Hello, ${name}! Welcome to NP AI`;
}

console.log(greetUser("Developer"));</textarea>
                    </div>
                    <div class="w-80 bg-gray-900 text-green-400 flex flex-col">
                        <div class="p-3 bg-gray-800 text-white">
                            <h3 class="font-semibold">Output</h3>
                        </div>
                        <div id="codeOutput" class="flex-1 p-4 font-mono text-sm overflow-y-auto">
                            <div class="text-gray-400">Ready to execute code...</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="file-content" class="flex-1 flex-col hidden">
                <div class="bg-white border-b border-gray-200 p-4">
                    <h2 class="text-lg font-semibold">File Processor</h2>
                    <p class="text-sm text-gray-600">Upload and analyze various file formats</p>
                </div>
                <div class="flex-1 p-6">
                    <div class="max-w-4xl mx-auto">
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <div id="fileUploadArea" class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors">
                                <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                                <h3 class="text-lg font-medium text-gray-700 mb-2">Upload Files</h3>
                                <p class="text-gray-500 mb-4">Drag and drop files here or click to browse</p>
                                <input type="file" id="fileInput" multiple class="hidden" onchange="handleFileUpload(event)">
                                <button onclick="document.getElementById('fileInput').click()" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">
                                    Browse Files
                                </button>
                                <p class="text-xs text-gray-400 mt-2">Supports: PDF, DOCX, TXT, CSV, JSON, Images</p>
                            </div>
                        </div>
                        <div id="fileList" class="mt-6 space-y-3">
                            </div>
                    </div>
                </div>
            </div>

            <div id="tools-content" class="flex-1 flex-col hidden">
                <div class="bg-white border-b border-gray-200 p-4">
                    <h2 class="text-lg font-semibold">AI Tools</h2>
                    <p class="text-sm text-gray-600">Specialized AI-powered utilities</p>
                </div>
                <div class="flex-1 overflow-y-auto p-6">
                    <div class="max-w-6xl mx-auto">
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <div class="tool-card bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                                <div class="flex items-center mb-4">
                                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
                                        <i class="fas fa-compress-alt text-blue-600 text-xl"></i>
                                    </div>
                                    <h3 class="text-lg font-semibold">Text Summarizer</h3>
                                </div>
                                <p class="text-gray-600 mb-4">Extract key information from long texts</p>
                                <button class="w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600" onclick="openTool('summarizer')">
                                    Use Tool
                                </button>
                            </div>

                            <div class="tool-card bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                                <div class="flex items-center mb-4">
                                    <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-3">
                                        <i class="fas fa-language text-green-600 text-xl"></i>
                                    </div>
                                    <h3 class="text-lg font-semibold">Translator</h3>
                                </div>
                                <p class="text-gray-600 mb-4">Translate text between multiple languages</p>
                                <button class="w-full bg-green-500 text-white py-2 rounded-lg hover:bg-green-600" onclick="openTool('translator')">
                                    Use Tool
                                </button>
                            </div>

                            <div class="tool-card bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                                <div class="flex items-center mb-4">
                                    <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mr-3">
                                        <i class="fas fa-check-circle text-purple-600 text-xl"></i>
                                    </div>
                                    <h3 class="text-lg font-semibold">Grammar Checker</h3>
                                </div>
                                <p class="text-gray-600 mb-4">Check and correct grammar mistakes</p>
                                <button class="w-full bg-purple-500 text-white py-2 rounded-lg hover:bg-purple-600" onclick="openTool('grammar')">
                                    Use Tool
                                </button>
                            </div>

                            <div class="tool-card bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                                <div class="flex items-center mb-4">
                                    <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mr-3">
                                        <i class="fas fa-pen-fancy text-red-600 text-xl"></i>
                                    </div>
                                    <h3 class="text-lg font-semibold">Content Generator</h3>
                                </div>
                                <p class="text-gray-600 mb-4">Generate creative content and copy</p>
                                <button class="w-full bg-red-500 text-white py-2 rounded-lg hover:bg-red-600" onclick="openTool('content')">
                                    Use Tool
                                </button>
                            </div>

                            <div class="tool-card bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                                <div class="flex items-center mb-4">
                                    <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center mr-3">
                                        <i class="fas fa-chart-bar text-yellow-600 text-xl"></i>
                                    </div>
                                    <h3 class="text-lg font-semibold">Data Analyzer</h3>
                                </div>
                                <p class="text-gray-600 mb-4">Analyze and visualize data patterns</p>
                                <button class="w-full bg-yellow-500 text-white py-2 rounded-lg hover:bg-yellow-600" onclick="openTool('analyzer')">
                                    Use Tool
                                </button>
                            </div>

                            <div class="tool-card bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                                <div class="flex items-center mb-4">
                                    <div class="w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center mr-3">
                                        <i class="fas fa-qrcode text-indigo-600 text-xl"></i>
                                    </div>
                                    <h3 class="text-lg font-semibold">QR Generator</h3>
                                </div>
                                <p class="text-gray-600 mb-4">Create QR codes for any content</p>
                                <button class="w-full bg-indigo-500 text-white py-2 rounded-lg hover:bg-indigo-600" onclick="openTool('qr')">
                                    Use Tool
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="toolModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-lg max-w-2xl w-full mx-4 max-h-90vh overflow-y-auto">
            <div class="p-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 id="modalTitle" class="text-xl font-semibold">AI Tool</h2>
                    <button onclick="closeModal()" class="p-2 hover:bg-gray-100 rounded-lg">
                        <i class="fas fa-times text-gray-600"></i>
                    </button>
                </div>
                <div id="modalContent">
                    </div>
            </div>
        </div>
    </div>
    
    <div id="apiModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-lg max-w-lg w-full mx-4 dark:bg-gray-800">
            <div class="p-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-semibold">Manage API Key</h2>
                    <button onclick="closeApiModal()" class="p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg">
                        <i class="fas fa-times text-gray-600 dark:text-gray-300"></i>
                    </button>
                </div>
                <div id="modalApiContent">
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">Your API key is used to authenticate your requests. Keep it secret and secure.</p>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Your API Key</label>
                            <div class="relative">
                                <input type="password" id="apiKeyInput" readonly class="w-full p-3 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none" value="np-sk-••••••••••••••••••••••••••••••••••••1a2b">
                                <button onclick="toggleApiKeyVisibility()" class="absolute right-12 top-1/2 transform -translate-y-1/2 p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
                                    <i id="apiKeyToggleIcon" class="fas fa-eye"></i>
                                </button>
                                <button onclick="copyApiKey()" class="absolute right-2 top-1/2 transform -translate-y-1/2 p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                        </div>
                        <div class="flex justify-between items-center pt-2">
                             <button onclick="generateNewApiKey()" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 text-sm">
                                <i class="fas fa-sync-alt mr-2"></i>Generate New Key
                            </button>
                            <button onclick="closeApiModal()" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">
                                Done
                            </button>
                        </div>
                        <p id="copyStatus" class="text-xs text-green-500 text-center h-4"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>
        // Theme toggle
        let isDark = false;
        document.getElementById('themeToggle').addEventListener('click', function() {
            isDark = !isDark;
            document.body.classList.toggle('dark', isDark);
            const icon = this.querySelector('i');
            icon.className = isDark ? 'fas fa-sun text-yellow-400' : 'fas fa-moon text-gray-600';
        });

        // Tab switching
        function switchTab(tabName) {
            // Hide all tabs
            const tabs = ['chat', 'image', 'code', 'file', 'tools'];
            tabs.forEach(tab => {
                document.getElementById(tab + '-content').classList.add('hidden');
                document.getElementById(tab + '-tab').classList.remove('active-tab');
            });
            
            // Show selected tab
            document.getElementById(tabName + '-content').classList.remove('hidden');
            document.getElementById(tabName + '-content').style.display = 'flex';
            document.getElementById(tabName + '-tab').classList.add('active-tab');
        }

        // Chat functionality
        function handleEnter(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;

            const chatMessages = document.getElementById('chatMessages');
            
            // Add user message
            const userMessage = document.createElement('div');
            userMessage.className = 'message-bubble flex justify-end';
            userMessage.innerHTML = `
                <div class="bg-blue-500 text-white rounded-lg p-3 max-w-xs lg:max-w-md">
                    ${message}
                </div>
            `;
            chatMessages.appendChild(userMessage);

            input.value = '';
            
            // Add typing indicator
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message-bubble flex items-start space-x-3';
            typingDiv.innerHTML = `
                <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                    <i class="fas fa-robot text-white text-sm"></i>
                </div>
                <div class="bg-gray-100 rounded-lg p-3">
                    <div class="flex space-x-1">
                        <div class="typing-indicator"></div>
                        <div class="typing-indicator"></div>
                        <div class="typing-indicator"></div>
                    </div>
                </div>
            `;
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;

            // Simulate AI response
            setTimeout(() => {
                typingDiv.remove();
                const aiResponse = document.createElement('div');
                aiResponse.className = 'message-bubble flex items-start space-x-3';
                aiResponse.innerHTML = `
                    <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                        <i class="fas fa-robot text-white text-sm"></i>
                    </div>
                    <div class="flex-1 bg-gray-100 rounded-lg p-3">
                        ${generateAIResponse(message)}
                    </div>
                `;
                chatMessages.appendChild(aiResponse);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 2000);
        }

        function generateAIResponse(message) {
            const responses = [
                "That's an interesting question! Let me help you with that. Based on your query, I can provide you with detailed information and suggestions.",
                "I understand what you're looking for. Here's my analysis and recommendations based on current best practices.",
                "Great question! I can assist you with this. Let me break down the key points and provide you with a comprehensive solution.",
                "Thanks for asking! I have experience with this topic and can offer you several approaches to consider.",
                "I'd be happy to help you with that. Here are some insights and practical steps you can take."
            ];
            return responses[Math.floor(Math.random() * responses.length)];
        }

        function clearChat() {
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = `
                <div class="message-bubble">
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                            <i class="fas fa-robot text-white text-sm"></i>
                        </div>
                        <div class="flex-1 bg-gray-100 rounded-lg p-3">
                            <p>Chat cleared! How can I help you today?</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function exportChat() {
            alert('Chat export functionality would be implemented here.');
        }

        function attachFile() {
            alert('File attachment functionality would be implemented here.');
        }

        function startVoiceInput() {
            alert('Voice input functionality would be implemented here.');
        }

        // Image generation
        function generateImage() {
            const prompt = document.getElementById('imagePrompt').value;
            if (!prompt.trim()) {
                alert('Please enter an image description');
                return;
            }

            const results = document.getElementById('imageResults');
            results.innerHTML = `
                <div class="col-span-2 text-center py-8">
                    <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"></div>
                    <p class="mt-2 text-gray-600">Generating image...</p>
                </div>
            `;

            // Simulate image generation
            setTimeout(() => {
                results.innerHTML = `
                    <div class="bg-gray-200 rounded-lg aspect-square flex items-center justify-center">
                        <div class="text-center">
                            <i class="fas fa-image text-4xl text-gray-400 mb-2"></i>
                            <p class="text-gray-600">Generated Image 1</p>
                            <p class="text-sm text-gray-500">${prompt}</p>
                        </div>
                    </div>
                    <div class="bg-gray-200 rounded-lg aspect-square flex items-center justify-center">
                        <div class="text-center">
                            <i class="fas fa-image text-4xl text-gray-400 mb-2"></i>
                            <p class="text-gray-600">Generated Image 2</p>
                            <p class="text-sm text-gray-500">${prompt}</p>
                        </div>
                    </div>
                `;
            }, 3000);
        }

        // Code functionality
        function runCode() {
            const code = document.getElementById('codeEditor').value;
            const language = document.getElementById('codeLanguage').value;
            const output = document.getElementById('codeOutput');
            
            output.innerHTML = `
                <div class="text-green-400">Running ${language} code...</div>
                <div class="mt-2">Output:</div>
                <div class="mt-1 text-white">${simulateCodeExecution(code, language)}</div>
            `;
        }

        function optimizeCode() {
            alert('Code optimization feature would analyze and improve your code.');
        }

        function explainCode() {
            alert('Code explanation feature would provide detailed analysis of your code.');
        }

        function simulateCodeExecution(code, language) {
            if (language === 'javascript' && code.includes('console.log')) {
                return 'Hello, Developer! Welcome to NP AI';
            }
            return 'Code executed successfully!';
        }

        // File processing
        function handleFileUpload(event) {
            const files = event.target.files;
            const fileList = document.getElementById('fileList');
            
            Array.from(files).forEach(file => {
                const fileDiv = document.createElement('div');
                fileDiv.className = 'bg-white rounded-lg shadow-sm border border-gray-200 p-4';
                fileDiv.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                <i class="fas fa-file text-blue-600"></i>
                            </div>
                            <div>
                                <h4 class="font-medium">${file.name}</h4>
                                <p class="text-sm text-gray-500">${(file.size / 1024).toFixed(1)} KB</p>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button class="px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600">
                                Analyze
                            </button>
                            <button class="px-3 py-1 bg-red-500 text-white rounded text-sm hover:bg-red-600">
                                Remove
                            </button>
                        </div>
                    </div>
                `;
                fileList.appendChild(fileDiv);
            });
        }

        // Tools modal
        function openTool(toolType) {
            const modal = document.getElementById('toolModal');
            const title = document.getElementById('modalTitle');
            const content = document.getElementById('modalContent');
            
            const toolConfigs = {
                summarizer: {
                    title: 'Text Summarizer',
                    content: `
                        <textarea class="w-full h-40 p-3 border border-gray-300 rounded-lg resize-none" placeholder="Paste your text here to summarize..."></textarea>
                        <div class="mt-4 flex justify-between items-center">
                            <select class="p-2 border border-gray-300 rounded">
                                <option>Short Summary</option>
                                <option>Medium Summary</option>
                                <option>Key Points</option>
                            </select>
                            <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Summarize</button>
                        </div>
                    `
                },
                translator: {
                    title: 'Language Translator',
                    content: `
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <select class="p-2 border border-gray-300 rounded">
                                <option>English</option>
                                <option>Spanish</option>
                                <option>French</option>
                                <option>German</option>
                            </select>
                            <select class="p-2 border border-gray-300 rounded">
                                <option>Spanish</option>
                                <option>English</option>
                                <option>French</option>
                                <option>German</option>
                            </select>
                        </div>
                        <textarea class="w-full h-32 p-3 border border-gray-300 rounded-lg resize-none" placeholder="Enter text to translate..."></textarea>
                        <div class="mt-4">
                            <button class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Translate</button>
                        </div>
                    `
                },
                grammar: {
                    title: 'Grammar Checker',
                    content: `
                        <textarea class="w-full h-40 p-3 border border-gray-300 rounded-lg resize-none" placeholder="Paste your text here to check grammar..."></textarea>
                        <div class="mt-4">
                            <button class="bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600">Check Grammar</button>
                        </div>
                    `
                }
            };
            
            const config = toolConfigs[toolType] || { title: 'AI Tool', content: '<p>Tool configuration not found.</p>' };
            title.textContent = config.title;
            content.innerHTML = config.content;
            modal.classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('toolModal').classList.add('hidden');
        }

        // API Key Modal Functionality
        let currentApiKey = "np-sk-a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0";

        function updateApiKeyDisplay() {
            const input = document.getElementById('apiKeyInput');
            if (input.type === 'password') {
                input.value = `np-sk-${'•'.repeat(36)}${currentApiKey.slice(-4)}`;
            } else {
                input.value = currentApiKey;
            }
        }

        function openApiModal() {
            document.getElementById('apiModal').classList.remove('hidden');
            updateApiKeyDisplay();
        }

        function closeApiModal() {
            document.getElementById('apiModal').classList.add('hidden');
            const input = document.getElementById('apiKeyInput');
            const icon = document.getElementById('apiKeyToggleIcon');
            input.type = 'password';
            icon.className = 'fas fa-eye';
            document.getElementById('copyStatus').textContent = '';
        }

        function toggleApiKeyVisibility() {
            const input = document.getElementById('apiKeyInput');
            const icon = document.getElementById('apiKeyToggleIcon');
            if (input.type === 'password') {
                input.type = 'text';
                icon.className = 'fas fa-eye-slash';
            } else {
                input.type = 'password';
                icon.className = 'fas fa-eye';
            }
            updateApiKeyDisplay();
        }

        function copyApiKey() {
            navigator.clipboard.writeText(currentApiKey).then(() => {
                const status = document.getElementById('copyStatus');
                status.textContent = 'API Key copied to clipboard!';
                setTimeout(() => { status.textContent = '' }, 2000);
            }).catch(err => {
                console.error('Failed to copy API key: ', err);
                const status = document.getElementById('copyStatus');
                status.textContent = 'Failed to copy!';
                setTimeout(() => { status.textContent = '' }, 2000);
            });
        }

        function generateNewApiKey() {
            if (confirm('Are you sure you want to generate a new API key? The old key will be invalidated.')) {
                const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
                let newKey = 'np-sk-';
                for (let i = 0; i < 40; i++) {
                    newKey += chars.charAt(Math.floor(Math.random() * chars.length));
                }
                currentApiKey = newKey;
                document.getElementById('apiKeyInput').type = 'password';
                document.getElementById('apiKeyToggleIcon').className = 'fas fa-eye';
                updateApiKeyDisplay();

                const status = document.getElementById('copyStatus');
                status.textContent = 'New API Key generated successfully!';
                setTimeout(() => { status.textContent = '' }, 2000);
            }
        }


        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            switchTab('chat');
        });

        // Close modals when clicking outside
        document.getElementById('toolModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
        document.getElementById('apiModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeApiModal();
            }
        });
    </script>
</body>
</html>
